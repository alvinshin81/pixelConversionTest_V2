<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>kakao Ad Platform QA Test Area</title>
    <link rel="icon" type="image/png" href="./rsc/qaThumb.png">
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script type="text/javascript" charset="UTF-8" src="//t1.daumcdn.net/kas/static/kp.dev.min.js"></script>
    
    <style>
        /* 꾸미기 */
        .card {
            transition: transform 0.2s ease;
        }

        .card:hover {
            transform: scale(1.05);
        }

        .home-btn {
            display: block;
            position: absolute;
            top: 10px;
            left: 10px;
            width: 40px;
            height: 40px;
            background-color: #eee;
            border-radius: 50%;
            text-decoration: none;
            overflow: hidden;
        }

        .home-btn img {
            width: 20px;
            height: 20px;
            margin: 10px;
        }
    </style>
    <a href="./index.html" class="home-btn">
        <img src="./rsc/home-icon.png" alt="Home"/>
    </a>
</head>
<body>
    <div class="hero bg-dark text-center py-1" style="margin-bottom: 10px;">
        <h1 class="text-white">픽셀 & SDK 전환 지표 만들기</h1>
    </div>
    <div class="hero bg-secondary text-center py-1" style="margin-bottom: 10px;">
        <h2 class="text-white">구매 이벤트 수동 설정하기</h2>
    </div>
    
    <form>
        <label style="padding: 5px 1px 2px 10px;"><b>트랙 ID</b></label><br>
        <input type="number" id="trackId" name="trackId" style="width:400px;height:30px;font-size:15px;" placeholder="트랙 ID를 입력하세요." value="${param.trackId}"/><br><br>
        <label style="padding: 5px 1px 2px 10px;"><b>상품 A 정보 </b></label><br>
        ID  <input type="text" id="productIdA" name="productIdA" style="width:300px;height:30px;font-size:15px;" placeholder="A 상품 ID를 입력하세요."/><br>
        이름 <input type="text" id="productNameA" name="productNameA" style="width:300px;height:30px;font-size:15px;" placeholder="A 상품 이름을 입력하세요."/><br>
        가격 <input type="number" id="productPriceA" name="productPriceA" style="width:300px;height:30px;font-size:15px;" placeholder="A 상품 가격을 입력하세요."/><br>
        수량 <input type="number" id="productQtyA" name="productQtyA" style="width:300px;height:30px;font-size:15px;" placeholder="A 상품 수량을 입력하세요."/><br><br>

        <label style="padding: 5px 1px 2px 10px;"><b>상품 B 정보 </b></label><br>
        ID  <input type="text" id="productIdB" name="productIdB" style="width:300px;height:30px;font-size:15px;" placeholder="B 상품 ID를 입력하세요."/><br>
        이름 <input type="text" id="productNameB" name="productNameB" style="width:300px;height:30px;font-size:15px;" placeholder="B 상품 이름을 입력하세요."/><br>
        가격 <input type="number" id="productPriceB" name="productPriceB" style="width:300px;height:30px;font-size:15px;" placeholder="B 상품 가격을 입력하세요."/><br>
        수량 <input type="number" id="productQtyB" name="productQtyB" style="width:300px;height:30px;font-size:15px;" placeholder="B 상품 수량을 입력하세요."/><br><br>

        <button type="submit" class="btn btn-dark" id="submit">확인</button>
    </form>
  
    <div id="result"></div>
    <div id="productId"></div>
    <div id="productName"></div>
    <div id="productQty"></div>
    <div id="productPrice"></div>
    <br><br>
    <hr/>
    <br>
    <h5 style="color:blue;">다른 화면으로 가기</h5>
    <a class="btn btn-outline-info btn-lg m-2" href="event_viewContent.html" role="button" rel="nofollow">콘텐츠/상품 조회 세부 설정</a>
    <a class="btn btn-outline-secondary btn-lg m-2" href="trackId_event.html" role="button" rel="nofollow">이벤트 생성하기 Sandbox</a>
    
    <script type="text/javascript" charset="UTF-8" src="//t1.daumcdn.net/kas/static/kp.dev.min.js"></script>
    <script type="text/javascript">
        let trackId = document.getElementById('trackId');
        let productIdA = document.getElementById('productIdA');
        let productIdB = document.getElementById('productIdB');
        let productPriceA = document.getElementById('productPriceA');
        let productPriceB = document.getElementById('productPriceB');
        let productQtyA = document.getElementById('productQtyA');
        let productQtyB = document.getElementById('productQtyB');
        let productNameA = document.getElementById('productNameA');
        let productNameB = document.getElementById('productNameB');

        let buttonSubmit = document.getElementById('submit');
       
        buttonSubmit.addEventListener('click', function(){
            console.log("트랙 ID: " + trackId.value);
            if(!trackId.value || !productIdA.value || !productIdB.value || !productPriceA.value || !productPriceB.value || !productQtyA.value || !productQtyB.value || !productNameA.value || !productNameB.value){
                event.preventDefault();
                alert('필수값을 입력하세요.');
                }   
            else{
                const productQtyTotal = productQtyA.value + productQtyB.value;
                const productPriceTotal = productPriceA.value + productPriceB.value;

                console.log("productId: " + productIdA.value);
                console.log("productIdB: " + productIdB.value);
                console.log("productQtyA: " + productQtyA.value);
                console.log("productQtyB: " + productQtyB.value);
                console.log("productQtyTotal: " + productQtyTotal);
                console.log("productPriceA: " + productPriceA.value);
                console.log("productPriceB: " + productPriceB.value);
                console.log("productPriceTotal: " + productPriceTotal);
                console.log("productNameA: " + productNameA.value);
                console.log("productNameB: " + productNameB.value);
                //새로고침 방지
                event.preventDefault();

                kakaoPixel(trackId.value).pageView();
                kakaoPixel(trackId.value).purchase({
                    total_quantity: productQtyTotal, // 주문 내 상품 개수(optional)
                    total_price: productPriceTotal,  // 주문 총 가격(optional)
                    currency: "KRW",     // 주문 가격의 화폐 단위(optional, 기본 값은 KRW)
                    products: [          // 주문 내 상품 정보(optional)
                        {id: productIdA.value, name: productNameA.value, quantity: productQtyA.value, price: productPriceA.value},
                        // {name: productNameB.value, quantity: productQtyB.value, price: productPriceB.value},
                        {id: productIdB.value, name: productNameB.value, quantity: productQtyB.value, price: productPriceB.value}
                    ]
                });

                const r = "구매 완료";
                document.getElementById('result').innerText = trackId.value + r;
                document.getElementById('productId').innerText = "상품 ID: " + productIdA.value + ", " + productIdB.value;
                document.getElementById('productName').innerText = "상품 이름: " + productNameA.value + ", " + productNameB.value;
                document.getElementById('productQty').innerText = "상품 수량: " + productQtyA.value + ", " + productQtyB.value;
                document.getElementById('productPrice').innerText = "상품 가격: " + productPriceA.value + ", " + productPriceB.value;
            }
        });

         
    </script>
      

</body>
</html>